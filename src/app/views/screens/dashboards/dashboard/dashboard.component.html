<app-widgets-dropdown
        [totalUsers]="totalUsers"
        [engineerCount]="engineerCount"
        [technicianCount]="technicianCount"
        [totalMachines]="totalMachines"
        [totalKlasikCount]="totalKlasikCount"
        [totalPowerPackCount]="totalPowerPackCount"
></app-widgets-dropdown>

<c-card class="my-4">
    <c-card-footer>
        <c-row>
            <c-col xs>
                <!-- Users Table -->
                <c-card class="mb-4">
                    <c-card-body style="max-height: 400px; overflow-y: auto;">
                        <table
                                [hover]="true"
                                [responsive]="true"
                                [striped]="true"
                                align="middle"
                                cTable
                                class="mb-0 border"
                        >
                            <thead class="text-nowrap text-truncate">
                            <tr>
                                <th class="bg-body-tertiary text-center">
                                    <svg cIcon name="cilPeople"></svg>
                                </th>
                                <th class="bg-body-tertiary">Kullanıcı</th>
                                <th class="bg-body-tertiary">E-Posta</th>
                                <th class="bg-body-tertiary">Şirketi</th>
                                <th class="bg-body-tertiary text-center">Uygulama Tercihleri</th>
                                <th class="bg-body-tertiary text-center">Durumu</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let user of users">
                                <td class="text-center">
                                    <img [src]="user.avatar" alt="{{ user.nameSurname }}" class="c-avatar avatar-md avatar-success" />
                                </td>
                                <td>
                                    <div>{{ user.nameSurname }}</div>
                                    <div class="small text-body-secondary text-nowrap">
                                        <span>{{ user.userName }} | {{ user.userType }}</span>
                                    </div>
                                </td>
                                <td>{{ user.eMail }}</td>
                                <td>{{ user.companyName }}</td>
                                <td class="text-center">
                                    <div>Language: {{ user.preferences.language ? 'Türkçe' : 'İngilizce' }}</div>
                                    <div>Night Mode: {{ user.preferences.nightMode ? 'Açık' : 'Kapalı' }}</div>
                                </td>
                                <td class="text-center">{{ user.isActive ? 'Aktif' : 'Pasif' }}</td>
                            </tr>
                            </tbody>
                        </table>
                    </c-card-body>
                </c-card>

                <!-- Machines Table -->
                <c-card class="mb-4">
                    <c-card-body style="max-height: 400px; overflow-y: auto;">
                        <table
                                [hover]="true"
                                [responsive]="true"
                                [striped]="true"
                                align="middle"
                                cTable
                                class="mb-0 border">

                            <thead class="text-nowrap text-truncate">
                            <tr>
                                <th class="bg-body-tertiary">Makine ID</th>
                                <th class="bg-body-tertiary">Makine Sahibi</th>
                                <th class="bg-body-tertiary">Makine Türü</th>
                                <th class="bg-body-tertiary">Sisteme Eklenme Tarihi</th>
                                <th class="bg-body-tertiary">Son Güncelleme</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let machine of machines">
                                <td>{{ machine.machineID }}</td>
                                <td>{{ machine.ownerName }}</td>
                                <td>{{ machine.machineType }}</td>
                                <td>{{ machine.createdAt | date:'medium' }}</td>
                                <td>{{ machine.lastUpdate ? (machine.lastUpdate | date:'medium') : 'N/A' }}</td>
                            </tr>
                            </tbody>
                        </table>
                    </c-card-body>
                </c-card>

                <!-- Action Logs Table -->
                <c-card class="mb-4">
                    <c-card-body style="max-height: 400px; overflow-y: auto;">
                        <h5>Action Logs</h5>
                        <table
                                [hover]="true"
                                [responsive]="true"
                                [striped]="true"
                                align="middle"
                                cTable
                                class="mb-0 border">

                            <thead class="text-nowrap text-truncate">
                            <tr>
                                <th class="bg-body-tertiary">ID</th>
                                <th class="bg-body-tertiary">Kaynak Kullanıcı</th>
                                <th class="bg-body-tertiary">Etkilenen Kullanıcı</th>
                                <th class="bg-body-tertiary">Etkilenen Makine ID</th>
                                <th class="bg-body-tertiary">Etkilenen Bakım ID</th>
                                <th class="bg-body-tertiary">Etkilenen Hidrolik Ünite ID</th>
                                <th class="bg-body-tertiary">Operasyon Bölümü</th>
                                <th class="bg-body-tertiary">Operasyon Türü</th>
                                <th class="bg-body-tertiary">Operasyon Adı</th>
                                <th class="bg-body-tertiary">Operasyon Zamanı</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let log of actionLogs">
                                <td>{{ log.id }}</td>
                                <td>{{ log.sourceUserName }}</td>
                                <td>{{ log.affectedUserName || 'N/A' }}</td>
                                <td>{{ log.affectedMachineID || 'N/A' }}</td>
                                <td>{{ log.affectedMaintenanceID || 'N/A' }}</td>
                                <td>{{ log.affectedHydraulicUnitID || 'N/A' }}</td>
                                <td>{{ log.operationSection }}</td>
                                <td>{{ log.operationType }}</td>
                                <td>{{ log.operationName }}</td>
                                <td>{{ log.operationTime | date:'medium' }}</td>
                            </tr>
                            </tbody>
                        </table>
                    </c-card-body>
                </c-card>
            </c-col>
        </c-row>
    </c-card-footer>
</c-card>